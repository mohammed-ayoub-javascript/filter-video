{"version":3,"file":"background.js","mappings":"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","sources":["webpack://filter-video/./src/background.js","webpack://filter-video/./src/utils/VideoDetection.js","webpack://filter-video/webpack/bootstrap","webpack://filter-video/webpack/runtime/define property getters","webpack://filter-video/webpack/runtime/harmony module decorator","webpack://filter-video/webpack/runtime/hasOwnProperty shorthand","webpack://filter-video/webpack/runtime/make namespace object","webpack://filter-video/webpack/before-startup","webpack://filter-video/webpack/startup","webpack://filter-video/webpack/after-startup"],"sourcesContent":["import { isVideoPlayerURL } from './utils/VideoDetection.js';\n\n/**\n * Background Script: Manages extension state and coordinates between components\n * Responsibilities:\n * - Maintains video detection state across tabs\n * - Manages extension settings and persistence\n * - Coordinates messaging between popup and content scripts\n * - Keeps service worker alive for consistent functionality\n */\n\n// ===== State Management =====\n// Store tabs with detected videos: tabId -> { detected: boolean, filtered: boolean }\nlet detectedVideoTabs = new Map();\n\n// Extension settings with defaults\nlet isExtensionEnabled; // Default to enabled\nlet filterShortcut;  // Default shortcut key\nlet filterType; // Default filter type\nlet filterIntensity;  // Default filter intensity\nlet filterOnDetection; // Default filter on detection\nlet keyboardLayout; // Default keyboard layout\nlet resetKey;  // Default reset key\n\n// ===== Initialization =====\n// Function to manage alarm\nfunction updateAlarm(enabled) {\n  if (enabled) {\n    chrome.alarms.create('keepAlive', { periodInMinutes: 0.05 }); // Every 3 seconds for better reliability across different systems to prevent the extension from being killed\n  } else {\n    chrome.alarms.clear('keepAlive');\n  }\n}\n\n/**\n * Updates the extension icon based on enabled state\n * @param {boolean} enabled - Whether the extension is enabled\n */\nfunction updateIcon(enabled) {\n  const iconPath = enabled ? 'icons/icon32.png' : 'icons/icon32-disabled.png';\n  chrome.action.setIcon({ path: iconPath });\n}\n\n// Load saved state and set up initial alarm\nchrome.storage.local.get(['filterShortcut', 'filterIntensity', 'isEnabled', 'filterType', 'filterOnDetection', 'keyboardLayout', 'resetKey'], (result) => {\n  isExtensionEnabled = result.isEnabled ?? true;\n  filterShortcut = result.filterShortcut ?? ',';\n  filterType = result.filterType ?? 'blur';\n  filterIntensity = result.filterIntensity ?? 50;\n  filterOnDetection = result.filterOnDetection ?? false;\n  keyboardLayout = result.keyboardLayout ?? 'QWERTY';\n  resetKey = result.resetKey ?? 'r';\n  console.log('[Background] Loaded extension state:', isExtensionEnabled);\n  updateAlarm(isExtensionEnabled); // Set initial alarm state\n  updateIcon(isExtensionEnabled); // Set initial icon state\n});\n\n// ===== Helper Functions =====\n/**\n * Safely sends a message to a tab with error handling\n * @param {number} tabId - Target tab ID\n * @param {object} message - Message to send\n */\nfunction safeSendMessage(tabId, message) {\n  // First check if the tab exists and is ready\n  chrome.tabs.get(tabId).then(tab => {\n    if (tab.status === 'complete' && !tab.url.startsWith('chrome://')) {\n      return chrome.tabs.sendMessage(tabId, message).catch(() => {\n        // Silently ignore connection errors\n      });\n    }\n  }).catch(() => {\n    // Silently ignore if tab doesn't exist\n  });\n}\n\n/**\n * Safely broadcasts a message to the extension\n * @param {object} message - Message to broadcast\n */\nfunction safeBroadcast(message) {\n  chrome.runtime.sendMessage(message).catch(() => {\n    // Silently ignore connection errors\n  });\n}\n\n// Add helper function for Map logging at the top with other helper functions\nfunction logDetectedTabs(action, tabId = null) {\n  if (!IS_DEV) return;  // Only run in development\n  \n  chrome.tabs.query({}, (tabs) => {\n    const tabMap = {};\n    detectedVideoTabs.forEach((state, id) => {\n      const tab = tabs.find(t => t.id === id);\n      tabMap[id] = {\n        title: tab ? tab.title : 'Tab not found',\n        state: state\n      };\n    });\n    console.log(`[Tab Map ${action}] Current tabs (${detectedVideoTabs.size}):`);\n    console.table(tabMap);\n    if (tabId) {\n      const tab = tabs.find(t => t.id === tabId);\n      console.log(`[Tab Map ${action}] Affected tab:`, tab ? tab.title : 'Tab not found', `(ID: ${tabId})`);\n    }\n  });\n}\n\n// ===== Tab Event Handlers =====\n// Handle tab switching (instant check, no detection needed)\nchrome.tabs.onActivated.addListener(async (activeInfo) => {\n  const tab = await chrome.tabs.get(activeInfo.tabId);\n  if (isVideoPlayerURL(tab.url)) {\n    console.log('[Tab Switch] Video page:', tab.url);\n    // Remove this log if tab is not yet detected\n    if (detectedVideoTabs.has(tab.id)) {\n      console.log('[Tab Switch] Video already detected in this tab');\n    }\n  }\n});\n\n// Handle URL changes within the same tab\nchrome.webNavigation.onHistoryStateUpdated.addListener((details) => {\n  console.log('[URL Change] History state updated:', details.url);\n  if (details.frameId === 0) { // Only handle main frame updates\n    // If NOT a video page, we should delete the entry\n    if (!isVideoPlayerURL(details.url)) {\n      console.log('[URL Change] Not a video page:', details.url);\n      if (detectedVideoTabs.has(details.tabId)) {\n        detectedVideoTabs.delete(details.tabId);\n        logDetectedTabs('URL_CHANGE_REMOVAL', details.tabId);\n      }\n      // Notify about video status change\n      safeBroadcast({ \n        type: 'VIDEO_STATUS_CHANGED',\n        tabId: details.tabId,\n        hasVideo: false \n      });\n    } else {\n      // Only send DETECTION_READY for video pages\n      console.log('[URL Change] Video page detected, sending DETECTION_READY');\n      chrome.tabs.sendMessage(details.tabId, { type: 'DETECTION_READY' }).catch(error => {\n        console.log('[URL Change] Could not send DETECTION_READY - normal for non-video pages');\n      });\n    }\n  }\n});\n\n// ===== Message Handler =====\n// Listen for messages\nchrome.runtime.onMessage.addListener((message, sender, sendResponse) => {\n  console.log('[Background] Received message:', message);\n  console.log('[Background] From:', sender?.tab?.id);\n  \n  // Handle GET_VIDEO_STATUS (from popup) separately as it doesn't need tabId from sender\n  if (message.type === 'GET_VIDEO_STATUS' && message.tabId) {\n    const hasVideo = detectedVideoTabs.has(message.tabId);\n    console.log('[Background] Video status request for tab:', message.tabId, 'Has video:', hasVideo);\n    sendResponse({ hasVideo });\n    return true;  // Keep message channel open\n  }\n\n  if (message.type === 'GET_FILTER_ON_DETECTION') {\n    sendResponse({ autoFilter: filterOnDetection });\n    return true;\n  }\n\n  // Special handling for TOGGLE_EXTENSION as it comes from popup\n  if (message.type === 'TOGGLE_EXTENSION') {\n    isExtensionEnabled = message.enabled;\n    chrome.storage.local.set({ isEnabled: isExtensionEnabled });\n    console.log('[Background] Extension toggled to:', isExtensionEnabled);\n    \n    updateIcon(isExtensionEnabled); // Update icon when state changes\n    \n    if (!isExtensionEnabled) {\n      // Disable filter for all detected videos when extension is disabled\n      for (const [tabId, state] of detectedVideoTabs.entries()) {\n        console.log('[Background] Checking tab:', tabId, 'State:', state);\n        // Only disable filter if the video is currently filtered\n        if (state.filtered) {\n          console.log('[Background] Removing filter from tab:', tabId);\n          safeSendMessage(tabId, {\n            type: 'APPLY_FILTER',\n            shouldFilter: false,\n            intensity: filterIntensity,\n            filterType: filterType\n          });\n        }\n      }\n      // Notify all tabs to disable reset key\n      chrome.tabs.query({}, (tabs) => {\n        tabs.forEach(tab => safeSendMessage(tab.id, {\n          type: 'UPDATE_RESET_KEY',\n          key: null  // Set to null when disabled\n        }));\n      });\n      // Clear the detection map after sending disable filter messages\n      detectedVideoTabs.clear();\n      logDetectedTabs('DISABLING');\n    } else {\n      // When re-enabling, restore reset key\n      chrome.tabs.query({}, (tabs) => {\n        tabs.forEach(tab => safeSendMessage(tab.id, {\n          type: 'UPDATE_RESET_KEY',\n          key: resetKey\n        }));\n      });\n    }\n    // send the message to all tabs to update their isExtensionEnabled state\n    chrome.tabs.query({}, (tabs) => {\n      tabs.forEach(tab => safeSendMessage(tab.id, {\n        type: 'TOGGLE_EXTENSION',\n        enabled: isExtensionEnabled\n      }));\n    });    \n    updateAlarm(isExtensionEnabled);\n    sendResponse({ success: true, isEnabled: isExtensionEnabled });\n    return true;\n  }\n\n  if (message.type === 'TOGGLE_FILTER_ON_DETECTION') {\n    filterOnDetection = message.enabled;\n    chrome.storage.local.set({ filterOnDetection: filterOnDetection });\n    console.log('[Background] Filter on detection toggled to:', filterOnDetection);\n    return true;\n  }\n\n  const tabId = sender.tab?.id;\n  console.log('[Background] Processing message for tab:', tabId);\n  \n  // Handle content script messages\n  switch(message.type) {\n    case 'VIDEO_DETECTED':\n      if (!isExtensionEnabled) {\n        console.log('[Background] Extension disabled, ignoring video detection');\n        return;\n      }\n      console.log('[Background] Video detected in tab:', tabId);\n      // Initialize with both detected and blur state\n      detectedVideoTabs.set(tabId, { \n        detected: true, \n        filtered: filterOnDetection  // Initialize filter state\n      });\n      logDetectedTabs('DETECTION', tabId);\n\n      if (filterOnDetection) {\n        safeSendMessage(tabId, {\n          type: 'APPLY_FILTER',\n          shouldFilter: true,\n          intensity: filterIntensity,\n          filterType: filterType\n        });\n      }\n\n      // Broadcast to popup\n      safeBroadcast({ \n        type: 'VIDEO_DETECTED',\n        tabId: tabId\n      });\n      break;\n      \n    case 'TOGGLE_FILTER':\n      const state = detectedVideoTabs.get(tabId);\n      console.log('[Background] Before toggle - Tab state:', state);\n      if (state) {\n        state.filtered = !state.filtered;  // Toggle filter state\n        detectedVideoTabs.set(tabId, state);\n        console.log('[Background] After toggle New filtered:', state.filtered);\n        safeSendMessage(tabId, {\n          type: 'APPLY_FILTER',\n          shouldFilter: state.filtered,\n          intensity: filterIntensity,\n          filterType: filterType\n        });\n      }\n      break;\n\n    case 'UPDATE_SHORTCUT':\n      console.log('[Background] Updating shortcut key to:', message.key);\n      filterShortcut = message.key;\n      // Save to storage\n      chrome.storage.local.set({ filterShortcut: message.key });\n      // Notify only tabs with videos\n      chrome.tabs.query({}, (tabs) => {\n        console.log('[Background] Broadcasting shortcut update to video tabs');\n        tabs.forEach(tab => {\n          if (detectedVideoTabs.has(tab.id)) {\n            safeSendMessage(tab.id, {\n              type: 'UPDATE_SHORTCUT',\n              key: filterShortcut\n            });\n          }\n        });\n      });\n      break;\n\n    case 'GET_SHORTCUT':\n      sendResponse({ key: filterShortcut });\n      return true;  // Keep message channel open\n\n    case 'GET_IS_ENABLED':\n      sendResponse({ isEnabled: isExtensionEnabled });\n      return true;  // Keep message channel open\n\n    case 'GET_FILTER_INTENSITY':\n      sendResponse({ intensity: filterIntensity });\n      return true;  // Keep message channel open\n\n    case 'UPDATE_FILTER_INTENSITY':\n      console.log('[Background] Updating filter intensity to:', message.intensity);\n      filterIntensity = message.intensity;\n      // Save to storage\n      chrome.storage.local.set({ filterIntensity: message.intensity });\n      // Update any active filtered videos\n      chrome.tabs.query({}, (tabs) => {\n        tabs.forEach(tab => {\n          const state = detectedVideoTabs.get(tab.id);\n          if (state?.filtered) {\n            safeSendMessage(tab.id, {\n              type: 'APPLY_FILTER',\n              shouldFilter: true,\n              intensity: filterIntensity,\n              filterType: filterType\n            });\n          }\n        });\n      });\n      break;\n\n    case 'GET_FILTER_TYPE':\n      sendResponse({ filterType });\n      return true;  // Keep message channel open\n\n    case 'UPDATE_FILTER_TYPE':\n      console.log('[Background] Updating filter type to:', message.filterType);\n      filterType = message.filterType;\n      // Save to storage\n      chrome.storage.local.set({ filterType: message.filterType });\n      // Update any active filtered videos\n      chrome.tabs.query({}, (tabs) => {\n        tabs.forEach(tab => {\n          const state = detectedVideoTabs.get(tab.id);\n          if (state?.filtered) {\n            safeSendMessage(tab.id, {\n              type: 'APPLY_FILTER',\n              shouldFilter: true,\n              intensity: filterIntensity,\n              filterType: filterType\n            });\n          }\n        });\n      });\n      break;\n\n    case 'POPUP_GET_KEYBOARD_LAYOUT':\n    case 'CONTENT_GET_KEYBOARD_LAYOUT':\n      sendResponse({ layout: keyboardLayout });\n      return true;\n\n    case 'POPUP_UPDATE_KEYBOARD_LAYOUT':\n      console.log('[Background] Updating keyboard layout to:', message.layout);\n      keyboardLayout = message.layout;\n      chrome.storage.local.set({ keyboardLayout: message.layout });\n      chrome.tabs.query({}, (tabs) => {\n        tabs.forEach(tab => {\n          if (detectedVideoTabs.has(tab.id)) {\n            safeSendMessage(tab.id, {\n              type: 'CONTENT_UPDATE_KEYBOARD_LAYOUT',\n              layout: keyboardLayout\n            });\n          }\n        });\n      });\n      break;\n\n    case 'GET_RESET_KEY':\n      sendResponse({ key: resetKey });\n      return true;\n\n    case 'UPDATE_RESET_KEY':\n      console.log('[Background] Updating reset key to:', message.key);\n      resetKey = message.key;\n      chrome.storage.local.set({ resetKey: message.key });\n      chrome.tabs.query({}, (tabs) => {\n        tabs.forEach(tab => {\n          if (detectedVideoTabs.has(tab.id)) {\n            safeSendMessage(tab.id, {\n              type: 'UPDATE_RESET_KEY',\n              key: resetKey\n            });\n          }\n        });\n      });\n      break;\n\n    case 'QUICK_RESET':\n      // Only handle if extension is enabled and we have the tab ID\n      if (isExtensionEnabled && sender.tab?.id) {\n        console.log('[Background] Quick reset triggered for tab:', sender.tab.id);\n        const tabId = sender.tab.id;\n        \n        // Only reset this specific tab\n        safeSendMessage(tabId, {\n          type: 'QUICK_RESET_STATE',\n          enabled: false\n        });\n        \n        // Re-enable after delay for this tab only\n        setTimeout(() => {\n          safeSendMessage(tabId, {\n            type: 'QUICK_RESET_STATE',\n            enabled: true\n          });\n        }, 500);\n      }\n      break;\n  }\n});\n\n// ===== Cleanup and Maintenance =====\n// Clean up when tab is closed\nchrome.tabs.onRemoved.addListener((tabId) => {\n  if (detectedVideoTabs.has(tabId)) {\n    console.log('[Tab Closed] Removing detected video for tab:', tabId);\n    detectedVideoTabs.delete(tabId);\n    logDetectedTabs('REMOVAL', tabId);\n  }\n});\n\n// Keep alive handler\nchrome.alarms.onAlarm.addListener((alarm) => {\n  if (alarm.name === 'keepAlive') {\n    // Check if extension is enabled\n    chrome.storage.local.get(['isEnabled'], (result) => {\n      if (result.isEnabled) {\n        console.log('[Background] Extension active');\n      }\n    });\n  }\n});\n\n// Export for testing\nif (typeof module !== 'undefined' && module.exports) {\n  module.exports = {\n    isVideoPlayerURL,\n    detectedVideoTabs\n  };\n}","// ===== Video Detection Utils =====\n\nconst SUPPORTED_PLATFORMS = ['www.youtube.com', 'www.netflix.com', 'www.primevideo.com', 'www.disneyplus.com', 'www.instagram.com', 'www.coursera.org', 'zeteo.com'];\n\nconst firstHandlingCheckers = [youtube, netflix, disneyplus, coursera, zeteo];\nconst secondHandlingCheckers = [primevideo];\n\n/**\n * Check if the URL is a video player URL\n * @param {string} url - The URL to check\n * @returns {number} - 0: no video player, 1: first handling platform, 2: second handling platform, 3: tiktok (special handling), 4: instagram reels (special handling), 5: instagram feed (special handling), -1: iframe\n */\nexport function isVideoPlayerURL(url) {\n    \n    if (firstHandlingCheckers.some(checker => checker(url))) return 1;\n    \n    if (secondHandlingCheckers.some(checker => checker(url))) return 2;\n    \n    // Special case for TikTok\n    if (tiktokNoFeed(url)) return 3;\n    \n    // Special case for Instagram Reels\n    if (instagramReels(url)) return 4;\n    \n    // get domain name\n    url = url.split('/')[2];\n\n    // Special case for Instagram Feed\n    if (instagramFeed(url)) return 5;\n\n    // Special case for TikTok Feed\n    if (tiktokFeed(url)) return 6;\n\n    console.log(url);\n    return SUPPORTED_PLATFORMS.includes(url) ? 0 : -1; // If the domain is in the supported platforms, return 0 (no video player), else return -1 (iframe)\n}\n\n\nfunction youtube(url) {\n    return url.includes('youtube.com/watch') || url.includes('youtube.com/shorts');\n}\n\nfunction netflix(url) {\n    return url.includes('netflix.com/watch');\n}\n\nfunction disneyplus(url) {\n    return url.includes('disneyplus.com') && url.includes('play');\n}\n\nfunction coursera(url) {\n    return url.includes('coursera.org') && url.includes('lecture');\n}\n\nfunction zeteo(url) {\n    return url.includes('zeteo.com/p');\n}\n\nfunction tiktokNoFeed(url) {\n    return url.includes('tiktok.com/@');\n}\n\nfunction primevideo(url) {\n    return url.includes('primevideo.com') && url.includes('detail');\n}\n\nfunction instagramReels(url) {\n    return url.includes('instagram.com/reels');\n}\n\nfunction instagramFeed(url) {\n    return url === 'www.instagram.com';\n}\n\nfunction tiktokFeed(url) {\n    return url === 'www.tiktok.com';\n}","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.hmd = (module) => {\n\tmodule = Object.create(module);\n\tif (!module.children) module.children = [];\n\tObject.defineProperty(module, 'exports', {\n\t\tenumerable: true,\n\t\tset: () => {\n\t\t\tthrow new Error('ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: ' + module.id);\n\t\t}\n\t});\n\treturn module;\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(\"./src/background.js\");\n",""],"names":["_regeneratorRuntime","e","t","r","Object","prototype","n","hasOwnProperty","o","defineProperty","value","i","Symbol","a","iterator","c","asyncIterator","u","toStringTag","define","enumerable","configurable","writable","wrap","Generator","create","Context","makeInvokeMethod","tryCatch","type","arg","call","h","l","f","s","y","GeneratorFunction","GeneratorFunctionPrototype","p","d","getPrototypeOf","v","values","g","defineIteratorMethods","forEach","_invoke","AsyncIterator","invoke","_typeof","resolve","__await","then","callInvokeWithMethodAndArg","Error","done","method","delegate","maybeInvokeDelegate","sent","_sent","dispatchException","abrupt","TypeError","resultName","next","nextLoc","pushTryEntry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","push","resetTryEntry","completion","reset","isNaN","length","displayName","isGeneratorFunction","constructor","name","mark","setPrototypeOf","__proto__","awrap","async","Promise","keys","reverse","pop","prev","charAt","slice","stop","rval","handle","complete","finish","_catch","delegateYield","asyncGeneratorStep","_asyncToGenerator","arguments","apply","_next","_throw","isVideoPlayerURL","detectedVideoTabs","Map","isExtensionEnabled","filterShortcut","filterType","filterIntensity","filterOnDetection","keyboardLayout","resetKey","updateAlarm","enabled","chrome","alarms","periodInMinutes","clear","updateIcon","iconPath","action","setIcon","path","storage","local","get","result","_result$isEnabled","_result$filterShortcu","_result$filterType","_result$filterIntensi","_result$filterOnDetec","_result$keyboardLayou","_result$resetKey","isEnabled","console","log","safeSendMessage","tabId","message","tabs","tab","status","url","startsWith","sendMessage","safeBroadcast","runtime","logDetectedTabs","undefined","IS_DEV","query","tabMap","state","id","find","title","concat","size","table","onActivated","addListener","_ref","_callee","activeInfo","_callee$","_context","has","_x","webNavigation","onHistoryStateUpdated","details","frameId","hasVideo","error","onMessage","sender","sendResponse","_sender$tab","_sender$tab2","_sender$tab3","autoFilter","set","_iterator","_createForOfIteratorHelper","entries","_step","_step$value","_slicedToArray","filtered","shouldFilter","intensity","err","key","success","detected","layout","setTimeout","onRemoved","onAlarm","alarm","module","exports","SUPPORTED_PLATFORMS","firstHandlingCheckers","youtube","netflix","disneyplus","coursera","zeteo","secondHandlingCheckers","primevideo","some","checker","tiktokNoFeed","instagramReels","split","instagramFeed","tiktokFeed","includes"],"sourceRoot":""}