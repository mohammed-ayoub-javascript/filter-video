<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FilterVideo - Visual Enhancement</title>
    <link rel="stylesheet" href="popup.scss">
</head>
<body>
    <!-- Main View -->
    <div id="mainView" class="view active">
        <div class="header">
            <div class="brand">
                <span class="brand-dot"></span>
                FilterVideo
            </div>
            <div class="header-controls">
                <button id="settingsButton" class="icon-button">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                        <path d="M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.07.62-.07.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"/>
                    </svg>
                </button>
                <div class="switch-container">
                    <label class="switch">
                        <input type="checkbox" id="enableSwitch">
                        <span class="slider round"></span>
                    </label>
                </div>
            </div>
        </div>
        
        <div id="status">Checking video status...</div>
        
        <div id="shortcut-container">
            Press 
            <span id="shortcut-key">,</span> 
            to toggle 
            <div class="custom-select">
                <button id="filter-type" class="filter-select">blur</button>
                <div class="select-items hidden">
                    <div class="select-item selected" data-value="blur">blur</div>
                    <div class="select-item" data-value="opacity">opacity</div>
                    <div class="select-item" data-value="grayscale">grayscale</div>
                    <div class="select-item" data-value="invert">invert</div>
                </div>
            </div>
        </div>
        
        <div id="intensity-container">
            <label for="filter-intensity">
                Intensity
                <span id="intensity-value">50%</span>
            </label>
            <input type="range" id="filter-intensity" min="1" max="100" value="50">
        </div>

        <div class="footer">
            <a href="https://forms.gle/muGcKNufR2XzAnVV9" target="_blank">
                <svg viewBox="0 0 24 24" fill="currentColor">
                    <path d="M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-7 12h-2v-2h2v2zm0-4h-2V6h2v4z"/>
                </svg>
                Feedback
            </a>
            <a href="#" id="supportButton">
                <svg viewBox="0 0 24 24" fill="currentColor">
                    <path d="M20 3H4v10c0 2.21 1.79 4 4 4h6c2.21 0 4-1.79 4-4v-3h2c1.11 0 2-.89 2-2V5c0-1.11-.89-2-2-2zm0 5h-2V5h2v3zM4 19h16v2H4z"/>
                </svg>
                Support
            </a>
            <a href="https://github.com/bengmoh/filter-video" target="_blank">
                <svg viewBox="0 0 24 24" fill="currentColor">
                    <path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/>
                </svg>
                GitHub
            </a>
        </div>
    </div>

    <!-- Donate View -->
    <div id="donateView" class="view">
        <button class="back-button">
            <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor">
                <path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/>
            </svg>
            Back
        </button>
        
        <div class="donate-options">
            <a href="https://www.buymeacoffee.com/filtervideo" target="_blank" class="donate-button">
                <svg class="donate-icon" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M12 3L2 12h3v8h14v-8h3L12 3zm0 13c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z"/>
                </svg>
                <span class="donate-text">Buy Me a Coffee</span>
                <svg class="donate-arrow" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M12 4l-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z"/>
                </svg>
            </a>
            <a href="https://paypal.me/filtervideo" target="_blank" class="donate-button">
                <svg class="donate-icon" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.94-.49-7-3.85-7-7.93 0-.62.08-1.22.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.18 5 4.05 5 7.41 0 2.08-.8 3.97-2.1 5.39z"/>
                </svg>
                <span class="donate-text">PayPal</span>
                <svg class="donate-arrow" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M12 4l-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z"/>
                </svg>
            </a>
        </div>
    </div>

    <!-- Settings View -->
    <div id="settingsView" class="view">
        <button class="back-button">
            <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor">
                <path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/>
            </svg>
            Back
        </button>
        
        <div class="settings-content">
            <div class="setting-item">
                <span>Auto-filter on detection</span>
                <label class="checkbox">
                    <input type="checkbox" id="autoFilterSwitch" checked>
                    <span class="checkmark"></span>
                </label>
            </div>
            <div class="setting-item">
                <span>Keyboard layout</span>
                <div class="custom-select">
                    <button id="keyboard-layout" class="filter-select">QWERTY</button>
                    <div class="select-items hidden">
                        <div class="select-item selected" data-value="QWERTY">QWERTY</div>
                        <div class="select-item" data-value="AZERTY">AZERTY</div>
                        <div class="select-item" data-value="QWERTZ">QWERTZ</div>
                        <div class="select-item" data-value="Dvorak">Dvorak</div>
                    </div>
                </div>
            </div>
            <div class="setting-item">
                <span>Quick reset key</span>
                <span id="reset-key" class="shortcut-key">r</span>
            </div>

            <div class="setting-item">
                <span>Language</span>
                <div class="language-buttons">
                    <a href="./lang/ar/ar.html" class="lang-button">
                        <span class="lang-key">عربي</span>
                    </a>
                    <a href="./popup.html" class="lang-button">
                        <span class="lang-key active">English</span>
                    </a>
                </div>
            </div>
        </div>
    </div>

    <script src="./popup.js"></script>

    <script>
        // Basic view switching functionality
        document.addEventListener('DOMContentLoaded', function() {
            // View switching
            const views = document.querySelectorAll('.view');
            const showView = (viewId) => {
                views.forEach(view => view.classList.remove('active'));
                document.getElementById(viewId).classList.add('active');
            };
            
            // Settings button
            document.getElementById('settingsButton').addEventListener('click', () => showView('settingsView'));
            
            // Support button
            document.getElementById('supportButton').addEventListener('click', () => showView('donateView'));
            
            // Back buttons
            document.querySelectorAll('.back-button').forEach(button => {
                button.addEventListener('click', () => showView('mainView'));
            });
            
            // Toggle select items
            document.querySelectorAll('.filter-select').forEach(select => {
                select.addEventListener('click', function() {
                    const items = this.nextElementSibling;
                    items.classList.toggle('hidden');
                });
            });
            
            // Close select items when clicking outside
            document.addEventListener('click', function(e) {
                if (!e.target.closest('.custom-select')) {
                    document.querySelectorAll('.select-items').forEach(el => {
                        el.classList.add('hidden');
                    });
                }
            });
            
            // Update intensity value
            const intensitySlider = document.getElementById('filter-intensity');
            const intensityValue = document.getElementById('intensity-value');
            intensitySlider.addEventListener('input', () => {
                intensityValue.textContent = `${intensitySlider.value}%`;
            });
            
            // Toggle extension switch
            const enableSwitch = document.getElementById('enableSwitch');
            enableSwitch.addEventListener('change', function() {
                document.getElementById('status').textContent = this.checked 
                    ? "Extension enabled - Ready to filter videos" 
                    : "Extension disabled - Videos will not be filtered";
                
                // Toggle visibility of controls
                document.querySelectorAll('#shortcut-container, #intensity-container').forEach(el => {
                    el.classList.toggle('hidden', !this.checked);
                });
            });
            
            // Initialize the UI
            enableSwitch.checked = true;
            document.getElementById('status').textContent = "Extension enabled - Ready to filter videos";
        });
    </script>
</body>
</html>